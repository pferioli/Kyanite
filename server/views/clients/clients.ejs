<%- include ("../partials/header") %>

<main class="site-content">
  <div class="row">
    <div id="admin" class="col s12">
      <div class="card material-table">
        <div class="table-header">
          <span class="table-title">Listado de Clientes</span>
          <div class="actions">
            <a href="/clients/new" id="button-add" class="modal-trigger waves-effect btn-flat nopadding"><i
                class="material-icons">add_box</i></a>
            <a href="#" id="button-delete" class="search-toggle waves-effect btn-flat nopadding"><i
                class="material-icons">search</i></a>
          </div>
        </div>
        <table id="datatable" class="table striped">
          <col style="width: 3%;" />
          <col style="width: 30%;" />
          <col style="width: 10%;" />
          <col style="width: 15%;" />
          <col style="width: 17%;" />
          <col style="width: 20%;" />
          <col style="width: 10%;" />
          <thead>
            <tr>
              <th>Codigo</th>
              <th>Nombre</th>
              <th>CUIT</th>
              <th>Direccion</th>
              <th>Telefono</th>
              <th>Correo</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <% for(var i=0; i < data.rows.length; i++) { %>
            <tr data-id="<%= data.rows[i].ID %>">
              <td><%= data.rows[i].CODIGO %></td>
              <td>
                <%= data.rows[i].RAZON_SOCIAL %>
              </td>
              <td><%= data.rows[i].CUIT %></td>
              <td><%= data.rows[i].DIRECCION %></td>
              <td><%= data.rows[i].TELEFONO %></td>
              <td><%= data.rows[i].EMAIL %></td>
              <td>
                <a href=" /clients/info/<%= data.rows[i].ID %>" class="btn-flat btn-small waves-effect waves-light"><i
                    class="material-icons">info</i></a>
                <a href="/clients/editar/<%= data.rows[i].ID %>" class="btn-flat btn-small waves-effect waves-light"><i
                    class="material-icons">edit</i></a>
                <a class="btn-flat btn-small waves-effect waves-light modal-trigger" data-target="modal_delete"
                  data-id="<%= data.rows[i].ID %>"></button><i class="material-icons">delete</i></a>
              </td>
            </tr>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</main>

<!-- Modal Structure -->
<div id="modal_delete" class="modal">
  <div class="modal-content">
    <h4>Eliminar Cliente</h4>
    <p>Está a punto de eliminar el cliente seleccionado y no podrá deshacer esta operación, seguro que desea
      continuar ?</p>
  </div>
  <div class="modal-footer">
    <a href="#!" class="modal-close waves-effect waves-green btn red" style="margin-right: 10px;"
      onclick="confirm_delete();">Eliminar</a>
    <a href="#!" class="modal-close waves-effect waves-green btn" style="margin-right: 10px;">Cancelar</a>
  </div>
</div>

<script>

  document.addEventListener("DOMContentLoaded", function () {
    var elems = document.querySelectorAll(".modal");
    var instances = M.Modal.init(elems, {})
  });

  function confirm_delete() {
    var elem = document.getElementById("modal_delete");
  }
</script>

<%- include ("../partials/footer") %>